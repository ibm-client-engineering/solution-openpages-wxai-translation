<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Create/Translate User Fields/Custom API Endpoint" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Custom Translation Service | Insert Solution Name</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ibm-client-engineering.github.io/solution-openpages-wxai-translation/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ibm-client-engineering.github.io/solution-openpages-wxai-translation/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ibm-client-engineering.github.io/solution-openpages-wxai-translation/Create/Translate User Fields/Custom API Endpoint"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="ibm client engineering, open solutions library"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Custom Translation Service | Insert Solution Name"><meta data-rh="true" name="description" content="Considerations for creating a custom translation service for OpenPages"><meta data-rh="true" property="og:description" content="Considerations for creating a custom translation service for OpenPages"><link data-rh="true" rel="icon" href="/solution-openpages-wxai-translation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ibm-client-engineering.github.io/solution-openpages-wxai-translation/Create/Translate User Fields/Custom API Endpoint"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-openpages-wxai-translation/Create/Translate User Fields/Custom API Endpoint" hreflang="en"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-openpages-wxai-translation/Create/Translate User Fields/Custom API Endpoint" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/solution-openpages-wxai-translation/flight-logs/rss.xml" title="Insert Solution Name RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/solution-openpages-wxai-translation/flight-logs/atom.xml" title="Insert Solution Name Atom Feed">






<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GB0XWXF3GE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GB0XWXF3GE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/solution-openpages-wxai-translation/assets/css/styles.284b6b33.css">
<script src="/solution-openpages-wxai-translation/assets/js/runtime~main.64afb4fc.js" defer="defer"></script>
<script src="/solution-openpages-wxai-translation/assets/js/main.74058bdd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/solution-openpages-wxai-translation/"><div class="navbar__logo"><img src="/solution-openpages-wxai-translation/img/logo.svg" alt="IBM Client Engineering Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="200" width="200"><img src="/solution-openpages-wxai-translation/img/logo-dark.svg" alt="IBM Client Engineering Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="200" width="200"></div><b class="navbar__title text--truncate">| Openpages watsonx.ai Translation</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/solution-openpages-wxai-translation/flight-logs">Flight Logs</a><a href="https://github.com/ibm-client-engineering/solution-openpages-wxai-translation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-openpages-wxai-translation/">OpenPages watsonx.ai Translation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/solution-openpages-wxai-translation/Overview/Business Overview">Overview</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-openpages-wxai-translation/Prepare">Prepare</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/solution-openpages-wxai-translation/Create/Translate User Fields/watsonxai  Translation Service">Create</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/solution-openpages-wxai-translation/Create/Translate User Fields/watsonxai  Translation Service">Translate User Fields</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-openpages-wxai-translation/Create/Translate User Fields/watsonxai  Translation Service">watsonx.ai Translation Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/solution-openpages-wxai-translation/Create/Translate User Fields/Custom API Endpoint">Custom Translation Service</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-openpages-wxai-translation/Create/Translate Headers and Labels">Translate Headers and Labels</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/solution-openpages-wxai-translation/Resources/sample">Resources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/solution-openpages-wxai-translation/Takeaways/sample">Takeaways</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/solution-openpages-wxai-translation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Create</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Translate User Fields</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Custom Translation Service</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Custom Translation Service</h1></header><div style="border-bottom:1px solid #000;margin-top:20px;margin-bottom:20px"></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="translating-with-neuralseek-from-an-openpages-perspective">Translating with NeuralSeek from an OpenPages perspective<a href="#translating-with-neuralseek-from-an-openpages-perspective" class="hash-link" aria-label="Direct link to Translating with NeuralSeek from an OpenPages perspective" title="Direct link to Translating with NeuralSeek from an OpenPages perspective">​</a></h3>
<p>To initially validate a NeuralSeek endpoint for translation, OpenPages will send a POST request to <code>&lt;endpoint&gt;/translate/</code> with the body <code>{text: [&quot;test connection&quot;], &quot;target&quot;: &quot;en&quot;}</code> (be aware that it will use a trailing slash, which may cause issues for some backend frameworks). This is also the same format that OpenPages will use for all translation requests, always with a single string in the target field&#x27;s array and with no indication of source language.</p>
<p>The output that OpenPages expects is:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">{</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;character_count&quot;: &lt;int&gt;, </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;detected_language&quot;: &lt;string&gt;, </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;detected_language_confidence&quot;: &lt;float&gt;, </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;translations&quot;: [&lt;string&gt;],</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;word_count&quot;: &lt;int&gt;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>OpenPages will also send the API key that you provide as basic authorization. For the purposes of our POC we ignored it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="translating-with-openpages-from-a-neuralseek-mimic-perspective">Translating with OpenPages from a NeuralSeek mimic perspective<a href="#translating-with-openpages-from-a-neuralseek-mimic-perspective" class="hash-link" aria-label="Direct link to Translating with OpenPages from a NeuralSeek mimic perspective" title="Direct link to Translating with OpenPages from a NeuralSeek mimic perspective">​</a></h3>
<p>The main step you need to complete before running the application is to create a <code>.env</code> file with the requisite credentials:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:#282c34;color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">WX_PROJECT_ID=&lt;watsonx Project ID&gt;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">WX_API_KEY=&lt;watsonx API Key&gt;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">WX_API_URL=&lt;watsonx API url&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-details">Technical details<a href="#technical-details" class="hash-link" aria-label="Direct link to Technical details" title="Direct link to Technical details">​</a></h3>
<p>When creating the <code>/translate</code> endpoint there are two steps to completing the translation using an LLM. The first step is to identify the source language, which we did by using a prompt that gave a the LLM only two options. This probably improved the accuracy of the source language detection but its proficiency in dinstinguishing a wider variety of lanugages is unknown.</p>
<p>The second step is to do the translation, using the source language information determined in the first step. We wanted the prompt to be modular enough so that we could use it for any combination of source and target language, although in our case we are only using it for English -&gt; Japanese. To that end, we kept a dictionary of examples for the same phrase in every language we wanted to support for this translation, so that we could easily access the translation examples for the LLM to use. We also directed the LLM to output the translation within a JSON object, which allows us to use the closed curly bracket &quot;}&quot; as a stop sequence.</p>
<p>To host this endpoint, we utilized IBM Code Engine, which can run containers in a fairly straightforward way. Code Engine uses an x86 architecture, so when you build the container image for the translation endpoint specify at least the <code>linux/amd64</code> platform. We built the image using podman buildx and hosted it on dockerhub. From there, you can create a new application on Code Engine and specify the Image reference as the image you pushed to dockerhub. As long as the image repo you pushed it to is public, you shouldn&#x27;t need a registry secret. In addition, this application doesn&#x27;t need a lot of power to run, so you can be conservative with the allocation of compute resources. You also will not need more than one instance of the container.</p>
<p>There&#x27;s also a <code>/history</code> endpoint for debugging, as we do not recommend trying to use Code Engine&#x27;s lackluster logging.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="outcome">Outcome<a href="#outcome" class="hash-link" aria-label="Direct link to Outcome" title="Direct link to Outcome">​</a></h3>
<p>Once the container has been set up and the integration saved in the OpenPages application, the translation feature will be enabled. There are two primary avenues for using this feature, translating object pages and auto-translating configuration text.</p>
<p>On any object page, there is a translation icon near the top right of the main tile. Clicking it will send a series of requests to the endpoint that we set up, and after the translations have completed the page will update to show the translated text. The text is translated from whatever language it is in originally into the language specified by the user&#x27;s locale. Each translated field will also have a button to show the original, untranslated text.</p>
<figure><p><img loading="lazy" alt="Before" src="/solution-openpages-wxai-translation/assets/images/before_translate-abf230b91f51f0a0d2225cb1baf1d716.png" width="3208" height="1840" class="img_ev3q">
</p><figcaption> Before </figcaption><p></p></figure>
<br>
<br>
<figure><p><img loading="lazy" alt="After" src="/solution-openpages-wxai-translation/assets/images/after_translate-3a1c10013efbb77243473d4c2d465496.png" width="3200" height="1830" class="img_ev3q">
</p><figcaption> After </figcaption><p></p></figure>
<br>
<br>
<p>To use the auto translate feature for configuration text, navigate to the right side bar under the settings icon (gear), and expand the &quot;System Configuration&quot; list.</p>
<p><img loading="lazy" alt="Navigate to headers" src="/solution-openpages-wxai-translation/assets/images/nav_headers-25037db50abef0bad69ff2b7f9149c85.png" width="3206" height="1838" class="img_ev3q"></p>
<p>Select the category of configuration text you would like to translate. You will find a list of fields that OpenPages stores as part of its configuration, along with associated translations. There is a button on the top to automatically translate the text fields for each locale using the translation service we set up. In our case, it fails for every language except English and Japanese due to a lack of support.</p>
<p><img loading="lazy" alt="Translate_headers" src="/solution-openpages-wxai-translation/assets/images/translate_headers-7802e860d7c471769373488987b75dbe.png" width="3204" height="1836" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/solution-openpages-wxai-translation/Create/Translate User Fields/watsonxai  Translation Service"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">watsonx.ai Translation Service</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/solution-openpages-wxai-translation/Create/Translate Headers and Labels"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Translate Headers and Labels</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#translating-with-neuralseek-from-an-openpages-perspective" class="table-of-contents__link toc-highlight">Translating with NeuralSeek from an OpenPages perspective</a></li><li><a href="#translating-with-openpages-from-a-neuralseek-mimic-perspective" class="table-of-contents__link toc-highlight">Translating with OpenPages from a NeuralSeek mimic perspective</a></li><li><a href="#technical-details" class="table-of-contents__link toc-highlight">Technical details</a></li><li><a href="#outcome" class="table-of-contents__link toc-highlight">Outcome</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Explore</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM</a></li><li class="footer__item"><a href="https://www.ibm.com/client-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Client Engineering</a></li><li class="footer__item"><a href="https://github.com/ibm-client-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Client Engineering Solutions Hub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://ibm.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://www.ibm.com/brand/experience-guides/developer/8f4e3cc2b5d52354a6d43c8edba1e3c9/02_8-bar-reverse.svg" alt="IBM Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="200" height="150"><img src="https://www.ibm.com/brand/experience-guides/developer/8f4e3cc2b5d52354a6d43c8edba1e3c9/02_8-bar-reverse.svg" alt="IBM Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="200" height="150"></a></div></div></div></footer></div>
</body>
</html>